(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{241:function(e,t,a){e.exports=a.p+"static/media/audience.5840a469.png"},265:function(e,t,a){e.exports=a(473)},269:function(e,t,a){},416:function(e,t,a){},473:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(12),c=a.n(o);a(269),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var s=a(70),i=a(521),l=a(520),u=a(516),m=Object(u.a)((function(e){return{footer:{textAlign:"center",padding:e.spacing(3,2),backgroundColor:"dark"===e.palette.type?e.palette.grey[800]:e.palette.grey[200]}}}));function p(){return r.a.createElement(s.a,{variant:"body2",color:"textSecondary"},"Copyright \xa9 ",r.a.createElement(l.a,{color:"inherit",href:"https://material-ui.com/"},"WeChat")," ",(new Date).getFullYear(),".")}function d(){var e=m();return r.a.createElement("footer",{className:e.footer},r.a.createElement(i.a,{maxWidth:"sm"},r.a.createElement(s.a,{variant:"body1"},"Application r\xe9alis\xe9 par Michael De Madet."),r.a.createElement(p,null)))}var h=a(21),g=a(93),f=a(235),v=a(19),E={open:!1,message:null,severity:null};function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"OPEN_NOTIFICATION":case"CLOSE_NOTIFICATION":return Object(v.a)({},e,{open:t.open,message:t.message,severity:t.severity});default:return e}}var C=a(17),y={pageNumber:0,totalPages:0,last:null,updateChatState:{chat:{id:null,name:""},open:!1}};function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_CHAT_PAGE_SUCCESS":return Object(v.a)({},e,{pageNumber:t.pageNumber,chatPage:t.chatPage,totalPages:t.totalPages,last:t.last});case"GET_CHAT_PAGE_ERROR":return Object(v.a)({},e,{errorMsg:t.errorMsg});case"OPEN_UPDATE_CHAT":return Object(v.a)({},e,{updateChatState:{open:t.open,chat:t.chat}});case"CLOSE_UPDATE_CHAT":return Object(v.a)({},e,{updateChatState:Object(v.a)({},e.updateChatState,{open:t.open})});case"FETCH_MORE_CHATS_SUCCESS":return Object(v.a)({},e,{pageNumber:t.pageNumber,chatPage:[].concat(Object(C.a)(e.chatPage),Object(C.a)(t.chatPage)),totalPages:t.totalPages,last:t.last});case"FETCH_MORE_CHATS_ERROR":return Object(v.a)({},e,{errorMsg:t.errorMsg});default:return e}}var N=[];function S(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_MESSAGE":return[{senderName:t.senderName,text:t.text}].concat(Object(C.a)(e));case"GET_MESSAGE_LIST":return Object(C.a)(t.messageList);default:return e}}var w={id:null,name:null,accessCode:null,speakerUsername:null,senderName:null,senderType:null,showCreateGuest:!1};function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SINGLE_CHAT_FOUND":return Object(v.a)({},e,{id:t.chat.id,name:t.chat.name,accessCode:t.chat.accessCode,speakerUsername:t.chat.speaker.username});case"SET_SENDER_NAME":return Object(v.a)({},e,{senderName:t.senderName});case"SET_SENDER_TYPE":return Object(v.a)({},e,{senderType:t.senderType});case"OPEN_CREATE_GUEST":case"CLOSE_CREATE_GUEST":return Object(v.a)({},e,{showCreateGuest:t.showCreateGuest});default:return e}}function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return{navbar:{height:64},notification:b(e.notification,t),chats:x(e.chats,t),SingleChat:O(e.SingleChat,t),messages:S(e.messages,t)}}var T=a(38),k=a(30),P=a(48),_=a(49),A=a(50),B=a(548),I=a(546),D=Object(u.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}})),L=function(e){var t=e.open,a=e.closeNotification,o=e.message,c=e.severity,s=D(),i=function(e,t){"clickaway"!==t&&a()},l="";return"string"===typeof o&&(l=o),Array.isArray(o)&&(l=o.map((function(e,t){return r.a.createElement(n.Fragment,{key:t},r.a.createElement("span",null,"- ",e),r.a.createElement("br",null))}))),r.a.createElement("div",{className:s.root},null===o&&null===c?null:r.a.createElement(B.a,{open:t,autoHideDuration:2e4,onClose:i},r.a.createElement(I.a,{elevation:6,variant:"filled",severity:c,onClose:i},l)))},M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return{type:"OPEN_NOTIFICATION",open:!0,message:e,severity:t}},R=function(e){function t(){return Object(T.a)(this,t),Object(P.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this.props,t=e.open,a=e.message,n=e.severity,o=e.closeNotification;return r.a.createElement(L,{open:t,closeNotification:o,message:a,severity:n})}}]),t}(n.Component),U=Object(h.b)((function(e){return{open:e.notification.open,message:e.notification.message,severity:e.notification.severity}}),(function(e){return{closeNotification:function(){return e({type:"CLOSE_NOTIFICATION",open:!1,message:null,severity:null})}}}))(R),z=a(528),F=a(18),G=a(60),H=a(25),W=a(529),q=a(524),V=a(550),J=a(547),Y=a(523),$=a(116),Z=a.n($),K=a(117),Q=a.n(K),X=a(118),ee=a.n(X),te=a(236),ae=a.n(te),ne=a(525),re=a(474),oe=a(526),ce=a(527),se=a(238),ie=a.n(se),le=a(530),ue=a(24),me=a(13),pe=a.n(me),de=a(27),he=a.n(de);function ge(){return!!ve("access_token")}function fe(e,t,a){var n=1e3*a,r={value:t,expiry:(new Date).getTime()+n};localStorage.setItem(e,JSON.stringify(r))}function ve(e){var t=localStorage.getItem(e);if(!t)return null;var a=JSON.parse(t);return(new Date).getTime()>a.expiry?(localStorage.removeItem(e),null):a.value}var Ee=a(6),be=Object(u.a)((function(e){return{root:{display:"flex"},drawer:Object(Ee.a)({},e.breakpoints.up("md"),{width:240,flexShrink:0}),appBar:Object(Ee.a)({},e.breakpoints.up("md"),{width:"100%",marginLeft:240}),menuButton:Object(Ee.a)({marginRight:e.spacing(2)},e.breakpoints.up("md"),{display:"none"}),toolbar:e.mixins.toolbar,drawerPaper:{width:240},content:{flexGrow:1,padding:e.spacing(3)},logoWrapper:{display:"flex",justifyContent:"center",alignItems:"center"},logo:{height:40},drawerLink:{textDecoration:"none",color:"black"},drawerLogo:{display:"flex"},drawerLogoTitle:{margin:"auto !important"},navbarLink:{textDecoration:"none",color:"white"},iconsColor:{fill:"white"}}}));var Ce=Object(G.g)((function(e){var t,a=e.container,n=e.history,o=e.openNotification,c=be(),i=Object(ue.a)(),l=r.a.useState(!1),u=Object(H.a)(l,2),m=u[0],p=u[1],d=function(){p(!m)},h=function(){localStorage.removeItem("access_token"),o("Vous \xeates d\xe9connect\xe9","info"),n.push("/connexion")};t=ge()?[{title:"chats",path:"/chats",icon:r.a.createElement(Z.a,null)},{title:"D\xe9connexion",icon:r.a.createElement(ae.a,null)}]:[{title:"Inscription",path:"/inscription",icon:r.a.createElement(Q.a,null)},{title:"Connexion",path:"/connexion",icon:r.a.createElement(ee.a,null)}];var g=r.a.createElement("div",null,r.a.createElement("div",{className:"".concat(c.toolbar," ").concat(c.drawerLogo," ").concat(c.logoWrapper)},r.a.createElement(F.b,{to:"/",className:c.drawerLink},r.a.createElement(s.a,null,"WeChat"))),r.a.createElement(q.a,null),r.a.createElement(ne.a,null,t.map((function(e,t){var a=e.title,n=e.path,o=e.icon;return"D\xe9connexion"===a?r.a.createElement(re.a,{onClick:h,key:t,button:!0},r.a.createElement(oe.a,null,o),r.a.createElement(ce.a,{primary:a})):r.a.createElement(F.b,{to:n,className:c.drawerLink,key:t},r.a.createElement(re.a,{button:!0},r.a.createElement(oe.a,null,o),r.a.createElement(ce.a,{primary:a})))}))));return r.a.createElement("div",{className:c.root},r.a.createElement(z.a,null),r.a.createElement(W.a,{className:c.appBar},r.a.createElement(le.a,{style:{height:e.navbarHeight}},r.a.createElement(Y.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:d,className:c.menuButton},r.a.createElement(ie.a,null)),r.a.createElement(F.b,{to:"/",className:c.navbarLink},r.a.createElement(s.a,null,"WeChat")),r.a.createElement(J.a,{smDown:!0},r.a.createElement("div",{style:{flexGrow:1}}),r.a.createElement(ne.a,{style:{display:"flex"}},t.map((function(e,t){var a=e.title,n=e.path;return"D\xe9connexion"===a?r.a.createElement(re.a,{key:t,onClick:h,button:!0},r.a.createElement(ce.a,{primary:a})):r.a.createElement(F.b,{to:n,className:c.navbarLink,key:t},r.a.createElement(re.a,{button:!0},r.a.createElement(ce.a,{primary:a})))})))))),r.a.createElement("nav",{className:c.drawer,"aria-label":"mailbox folders"},r.a.createElement(J.a,{smUp:!0,implementation:"css"},r.a.createElement(V.a,{container:a,variant:"temporary",anchor:"rtl"===i.direction?"right":"left",open:m,onClose:d,classes:{paper:c.drawerPaper},ModalProps:{keepMounted:!0}},g))))})),ye=function(e){function t(){return Object(T.a)(this,t),Object(P.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){return r.a.createElement(Ce,{openNotification:this.props.openNotification,navbarHeight:this.props.navbarHeight})}}]),t}(n.Component),xe=Object(h.b)((function(e){return{navbarHeight:e.navbar.height}}),(function(e){return{openNotification:function(t,a){return e(M(t,a))}}}))(ye),Ne=a(549),Se=a(532),we=a(544),Oe=a(251),je=a(531),Te=a(533),ke=a(243),Pe=a.n(ke),_e=a(33),Ae=a(15),Be=a(241),Ie=a.n(Be),De=Object(u.a)((function(e){return{grid:Object(Ee.a)({display:"flex",alignSelf:"center"},"".concat(e.breakpoints.down("sm")),{height:"auto"}),image:Object(Ee.a)({backgroundImage:"linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url(".concat(Ie.a,");"),backgroundRepeat:"no-repeat",backgroundColor:"light"===e.palette.type?e.palette.grey[50]:e.palette.grey[900],backgroundSize:"cover",backgroundPosition:"center"},"".concat(e.breakpoints.down("sm")),{paddingTop:64,paddingBottom:64}),paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(3,0),backgroundColor:e.palette.primary.main,height:52,width:52},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},meetingRoom:{height:28,width:28},gridItem:{display:"flex",alignItems:"center",justifyContent:"center"},leftContainer:{width:"80%",color:"white",textShadow:"2px 2px 2px #000"},leftSecondTitle:{marginTop:30,marginBottom:30},or:{margin:"0 20px",textShadow:"2px 2px 2px #000"},leftButton:{margin:"15px 0"}}})),Le=function(e){return{type:"SINGLE_CHAT_FOUND",chat:e}};var Me=Object(_e.a)({mapPropsToValues:function(e){return{code:e.code||""}},validationSchema:Ae.object().shape({code:Ae.string().max(10,"Le code ne peut pas exc\xe9der 10 caract\xe8res").required("Entrez le code du chat")}),handleSubmit:function(e,t){var a=t.props,n=e.code,r=a.getSingleChatByAccessCode,o=a.history;r(n).then((function(e){return e?o.push({pathname:"/chats/".concat(e.id),state:{chatId:e.id}}):null}))}})((function(e){var t=De(),a=e.values,n=e.touched,o=e.errors,c=e.handleChange,i=e.handleBlur,l=e.handleSubmit,u=e.navbar;return r.a.createElement(je.a,{container:!0,className:t.grid,component:"main",style:{minHeight:"calc(100vh - ".concat(u.height,"px)"),marginTop:u.height}},r.a.createElement(je.a,{item:!0,xs:12,sm:12,md:7,className:"".concat(t.image," ").concat(t.gridItem)},r.a.createElement("div",{className:t.leftContainer},r.a.createElement(s.a,{component:"h2",variant:"h4"},"Application de chat pour vos conf\xe9rences"),r.a.createElement(s.a,{component:"h3",variant:"h5",className:t.leftSecondTitle},"Commencez \xe0 cr\xe9er vos chats pour vos conf\xe9rences en cr\xe9ant un compte ou en vous connectant"),r.a.createElement(F.b,{to:"/inscription"},r.a.createElement(Se.a,{size:"large",className:t.leftButton,variant:"contained",color:"primary",startIcon:r.a.createElement(Q.a,null)},"Cr\xe9er un compte")),r.a.createElement("span",{className:t.or},"ou"),r.a.createElement(F.b,{to:"/connexion"},r.a.createElement(Se.a,{size:"large",className:t.leftButton,variant:"contained",color:"primary",startIcon:r.a.createElement(ee.a,null)},"Se connecter")))),r.a.createElement(je.a,{item:!0,xs:12,sm:12,md:5,component:Oe.a,elevation:6,className:t.gridItem,square:!0},r.a.createElement("div",{className:t.paper},r.a.createElement(Ne.a,{className:t.avatar},r.a.createElement(Te.a,{className:t.meetingRoom})),r.a.createElement(s.a,{component:"h2",variant:"h4",gutterBottom:!0},"Rejoignez un chat"),r.a.createElement(s.a,{component:"h3",variant:"h6"},"Accessible sans compte"),r.a.createElement("form",{className:t.form,onSubmit:l,noValidate:!0},r.a.createElement(we.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"code",label:"code du chat",name:"code",autoComplete:"code",autoFocus:!0,value:a.code,onChange:c,onBlur:i,error:n.code&&Boolean(o.code),helperText:n.code?o.code:""}),r.a.createElement(Se.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,endIcon:r.a.createElement(Pe.a,null)},"Rejoindre")))))})),Re=Object(h.b)((function(e){return{navbar:e.navbar}}),(function(e){return{getSingleChatByAccessCode:function(t){return e((a=t,function(e){var t,n;return pe.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,pe.a.awrap(he.a.get("http://localhost:8081/api/chats/getByAccessCode/".concat(a)));case 3:if(t=r.sent,n=t.data,console.log(n),!n){r.next=11;break}return e(Le(n)),r.abrupt("return",n);case 11:return e(M("Aucun chat trouv\xe9 avec le code d'acc\xe8s [".concat(a,"]"),"error")),r.abrupt("return",!1);case 13:r.next=19;break;case 15:return r.prev=15,r.t0=r.catch(0),console.log(r.t0),r.abrupt("return",!1);case 19:case"end":return r.stop()}}),null,null,[[0,15]])}));var a}}}))(Me),Ue=a(2),ze=function(e){var t=e.component,a=Object(Ue.a)(e,["component"]);return r.a.createElement(G.b,Object.assign({},a,{render:function(e){return ge()?r.a.createElement(t,e):r.a.createElement(G.a,{to:{pathname:"/connexion",state:{from:e.location}}})}}))},Fe=(a(416),function(){return r.a.createElement("div",{id:"notfound"},r.a.createElement("div",{className:"notfound"},r.a.createElement("div",{className:"notfound-404"}),r.a.createElement("h1",null,"404"),r.a.createElement("h2",null,"Oups! La page n'a pas \xe9t\xe9 trouv\xe9"),r.a.createElement("p",null,"D\xe9sol\xe9, la page que vous recherchez n'existe pas, a \xe9t\xe9 supprim\xe9, renomm\xe9 ou est temporairement indisponible"),r.a.createElement(F.b,{to:"/"},"Retour \xe0 la page d'accueil")))}),Ge=a(124),He=a.n(Ge),We=a(244),qe=new(a.n(We).a)({en:{username:"username",password:"password",confirmPassword:"confirm password",name:"name",startDateTime:"startDateTime",endDateTime:"endDateTime",message:"message"},fr:{username:"identifiant",password:"mot de passe",confirmPassword:"confirmation du mot de passe",name:"nom",startDateTime:"date de d\xe9but",endDateTime:"date de fin",message:"message"}}),Ve=Object(u.a)((function(e){return{avatar:{marginTop:e.spacing(3),marginBottom:e.spacing(1),marginLeft:"auto",marginRight:"auto",backgroundColor:e.palette.secondary.main},form:{width:"100%"},submit:{margin:e.spacing(3,0,2)},card:{width:"100%",borderRadius:10},cardContent:{width:"90%",margin:"0 auto"},title:{marginBottom:e.spacing(3)},paper:{width:"100%",padding:"60px"}}}));var Je=Object(_e.a)({mapPropsToValues:function(e){return{username:e.username||"",password:e.password||""}},validationSchema:Ae.object().shape({username:Ae.string().required("Entrez votre identifiant"),password:Ae.string().matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[.:;?|/\\{}<>!@#$%^&*()_+-=])(?=.{8,})/,"Doit contenir au moins 8 caract\xe8res, 1 minuscule, 1 majuscule, 1 chiffres, 1 caract\xe8re sp\xe9cial").required("Entrez votre mot de passe")}),handleSubmit:function(e,t){var a=t.props,n=t.resetForm,r=a.history,o=a.openNotification,c=e.username,s=e.password;(function(e,t){var a,n,r;return pe.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return"masterpiece-client","password",o.prev=2,o.next=5,pe.a.awrap(he.a.post("http://localhost:8081/oauth/token?grant_type=".concat("password","&username=").concat(e,"&password=").concat(t,"&client_id=").concat("masterpiece-client")));case 5:return a=o.sent,n=a.data.access_token,r=a.data.expires_in,fe("access_token",n,r),o.abrupt("return",!0);case 12:return o.prev=12,o.t0=o.catch(2),o.abrupt("return",!1);case 15:case"end":return o.stop()}}),null,null,[[2,12]])})(c,s).then((function(e){e?(n(),o("Bienvenue ".concat(c,", vous \xeates connect\xe9"),"success"),r.push("/chats")):o("Informations de connexion invalides","error")}))}})((function(e){var t=Ve(),a=e.values,n=e.touched,o=e.errors,c=e.handleChange,i=e.handleBlur,u=e.handleSubmit;return r.a.createElement(Oe.a,{className:t.paper,elevation:5},r.a.createElement(Ne.a,{className:t.avatar},r.a.createElement(He.a,null)),r.a.createElement(s.a,{component:"h1",variant:"h5",className:t.title},"Se Connecter"),r.a.createElement("form",{onSubmit:u,className:t.form,noValidate:!0},r.a.createElement(we.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"username",label:qe.username,name:"username",autoComplete:"username",autoFocus:!0,value:a.username,onChange:c,onBlur:i,helperText:n.username?o.username:"",error:n.username&&Boolean(o.username)}),r.a.createElement(we.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:qe.password,type:"password",id:"password",autoComplete:"current-password",value:a.password,onChange:c,onBlur:i,helperText:n.password?o.password:"",error:n.password&&Boolean(o.password)}),r.a.createElement(Se.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,size:"large"},"Connexion")),r.a.createElement(F.b,{to:"/inscription"},r.a.createElement(l.a,{component:"span",variant:"body2"},"Pas de compte ? Inscrivez vous")))})),Ye=Object(G.g)(Je),$e=Object(u.a)((function(e){var t;return{authContainer:(t={display:"flex",flexDirection:"column",alignItems:"center",textAlign:"center",width:"100%",justifyContent:"center"},Object(Ee.a)(t,"".concat(e.breakpoints.down("sm")),{minHeight:"100vh !important"}),Object(Ee.a)(t,"".concat(e.breakpoints.down("sm")," and (orientation: landscape)"),{height:"auto !important"}),t)}})),Ze=Object(h.b)((function(e){return{navbarHeight:e.navbar.height}}))((function(e){var t=e.children,a=e.maxWidth,o=e.navbarHeight,c=$e();return r.a.createElement(n.Fragment,null,r.a.createElement("div",{style:{height:o}}),r.a.createElement(i.a,{component:"main",maxWidth:a,className:c.authContainer,style:{height:"calc(100vh - ".concat(o,"px)")}},t))})),Ke=Object(h.b)(null,(function(e){return{openNotification:function(t,a){return e(M(t,a))}}}))((function(e){var t=e.openNotification;return r.a.createElement(Ze,{maxWidth:"md"},r.a.createElement(Ye,{openNotification:t}))})),Qe=a(545),Xe=a(245),et=a(534),tt=a(247),at=a.n(tt),nt=a(246),rt=a.n(nt),ot=a(535),ct=a(249),st=a(537),it=a(536),lt=function(e){var t=e.chat,a=e.openUpdateChat,o=e.deleteChat,c=r.a.useState(null),i=Object(H.a)(c,2),l=i[0],u=i[1],m=function(){u(null)};return r.a.createElement(n.Fragment,null,r.a.createElement(re.a,{button:!0},r.a.createElement(F.b,{to:{pathname:"/chats/".concat(t.id),state:{chatId:t.id}},style:{display:"inherit",alignItems:"inherit",color:"inherit",textDecoration:"inherit",width:"inherit"}},r.a.createElement(et.a,null,r.a.createElement(Ne.a,null,r.a.createElement(Z.a,null))),r.a.createElement(ce.a,{primary:t.name,secondary:"Code : ".concat(t.accessCode)})),r.a.createElement(ot.a,null,r.a.createElement(Y.a,{onClick:function(e){u(e.currentTarget)}},r.a.createElement(it.a,null)))),r.a.createElement(ct.a,{open:Boolean(l),onClose:m,anchorEl:l,keepMounted:!0},r.a.createElement(st.a,{onClick:function(){return function(e){a(e),m()}(t)}},r.a.createElement(oe.a,{"aria-label":"edit"},r.a.createElement(rt.a,null)),r.a.createElement(s.a,{variant:"inherit",noWrap:!0},"\xc9diter")),r.a.createElement(st.a,{onClick:function(){return e=t.id,o(e),void m();var e}},r.a.createElement(oe.a,{"aria-label":"delete"},r.a.createElement(at.a,null)),r.a.createElement(s.a,{variant:"inherit",noWrap:!0},"Supprimer"))))},ut=Object(u.a)((function(e){var t;return{ChatList:(t={width:"100%",backgroundColor:e.palette.background.paper,margin:"30px 0"},Object(Ee.a)(t,"".concat(e.breakpoints.down("sm")),{padding:"auto"}),Object(Ee.a)(t,"".concat(e.breakpoints.up("sm")),{padding:20}),t),title:{marginTop:50,marginBottom:50},noChat:{textAlign:"center"},paginationContainer:{display:"flex",alignItems:"center",justifyContent:"center"},pagination:{display:"inline-flex",padding:0,marginBottom:30}}})),mt=function(e){var t=ut(),a=e.chatPage,o=e.deleteChat,c=e.getChatPage,i=e.openUpdateChat,l=e.fetchMoreChats,u=e.pageNumber,m=e.totalPages,p=e.last;return r.a.createElement(n.Fragment,null,r.a.createElement(s.a,{className:t.title,variant:"h4",component:"h2",align:"center"},"Vos chats"),a&&0!==a.length?r.a.createElement(n.Fragment,null,r.a.createElement(J.a,{xsDown:!0},r.a.createElement(Oe.a,{elevation:3},r.a.createElement(ne.a,{className:t.ChatList},a.map((function(e,t){return r.a.createElement(lt,{key:t,openUpdateChat:i,deleteChat:o,chat:e,getChatPage:c})})))),m>1?r.a.createElement("div",{className:t.paginationContainer},r.a.createElement(Qe.a,{page:u+1,count:m,className:t.pagination,onChange:function(e,t){return c(t-1)}})):null),r.a.createElement(J.a,{smUp:!0},r.a.createElement(Xe.a,{dataLength:a.length,next:p?console.log("already in last page"):function(){return l(u+1)},hasMore:!0},r.a.createElement(Oe.a,{elevation:3},r.a.createElement(ne.a,{className:t.ChatList},a.map((function(e,t){return r.a.createElement(lt,{key:t,openUpdateChat:i,deleteChat:o,chat:e,getChatPage:c})}))))))):r.a.createElement("div",{className:t.noChat},r.a.createElement("p",null,"Vous n'avez pas encore de chats"),r.a.createElement("p",null,"Vous pouvez en cr\xe9er avec le bouton en bas \xe0 droite")))},pt=a(539),dt=a(543),ht=a(541),gt=a(542),ft=a(540),vt=a(538),Et=a(125),bt=a.n(Et),Ct=Object(u.a)((function(e){return{chatNameInput:{marginBottom:e.spacing(4)},datePicker:{width:250,marginBottom:e.spacing(2)},fab:{position:"fixed",bottom:e.spacing(5),right:e.spacing(5),textTransform:"none"},extendedIcon:{marginRight:e.spacing(1)}}})),yt=Object(_e.a)({mapPropsToValues:function(e){return{name:e.name||""}},validationSchema:Ae.object().shape({name:Ae.string().max(120,"Le nom du chat ne peut pas exc\xe9der 120 caract\xe8res").required("Veuillez entrer un nom pour le chat")}),handleSubmit:function(e,t){var a=t.props,n=t.resetForm,r=t.setSubmitting,o=Object(v.a)({},e),c=a.createChat,s=a.getChatPage;c(o).then((function(e){e?(n(),r(!0),s(0)):r(!1)}))}})((function(e){var t=e.values,a=e.touched,n=e.errors,o=e.handleChange,c=e.handleBlur,s=e.handleSubmit,i=e.isSubmitting,l=e.setSubmitting,u=Ct(),m=r.a.useState(!1),p=Object(H.a)(m,2),d=p[0],h=p[1],g=function(){h(!1)};return r.a.createElement("div",null,r.a.createElement(vt.a,{onClick:function(){l(!1),h(!0)},className:u.fab,color:"primary","aria-label":"add",variant:"extended"},r.a.createElement(bt.a,{className:u.extendedIcon}),"Cr\xe9er un chat"),r.a.createElement(pt.a,{open:!i&&d,onClose:g,"aria-labelledby":"form-dialog-title",disableBackdropClick:!0},r.a.createElement("form",{onSubmit:s},r.a.createElement(ft.a,{id:"form-dialog-title"},"Cr\xe9er un nouveau chat"),r.a.createElement(ht.a,null,r.a.createElement(gt.a,null,"Cr\xe9er un chat, vous permettant de communiquer avec vos invit\xe9s."),r.a.createElement(we.a,{autoFocus:!0,margin:"dense",id:"name",label:"Nom du chat",type:"text",fullWidth:!0,className:u.chatNameInput,value:t.name,onChange:o,onBlur:c,helperText:a.name?n.name:"",error:a.name&&Boolean(n.name),variant:"outlined"})),r.a.createElement(dt.a,null,r.a.createElement(Se.a,{color:"primary",onClick:g,variant:"outlined"},"Annuler"),r.a.createElement(Se.a,{type:"submit",color:"primary",variant:"contained"},"Cr\xe9er")))))})),xt={NotBlank:"Ne doit pas \xeatre vide",NotNull:"Ne peut \xeatre nul",UniqueUsername:"Un compte ayant cet identifiant existe d\xe9j\xe0",Future:"Doit \xeatre dans le futur",FutureOrPresent:"Ne doit pas \xeatre dans le pass\xe9",Size:"Contient trop de caract\xe8res",AfterDate:"Le d\xe9but du meeting doit \xeatre avant la fin du meeting",AccountPassword:"Doit contenir au moins 8 caract\xe8res, dont au minimum 1 majuscule, 1 minuscule, 1 chiffre, et 1 caract\xe8re sp\xe9cial"},Nt=function(e,t){return null===t?"".concat(xt[e]):"[Champ ".concat(qe[t],"] : ").concat(xt[e])},St=function(e,t){var a=[];return 400===e?t.forEach((function(e){var t=Nt(e.code,e.attribute);a.push(t)})):401===e?a.push("Une identification est n\xe9cessaire pour obtenir la r\xe9ponse demand\xe9e."):404===e?a.push("Le serveur n'a pas trouv\xe9 la ressource demand\xe9e"):500===e?a.push("Erreur interne du serveur"):a.push("Une erreur est survenue"),a};function wt(e,t,a){return{type:"GET_CHAT_PAGE_SUCCESS",chatPage:t,pageNumber:e,totalPages:a}}function Ot(e){return console.log("getChatPage called with page number : "+e),function(t){var a,n,r,o,c;return pe.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,a=ve("access_token"),n={headers:{Authorization:"Bearer ".concat(a)}},5,s.next=6,pe.a.awrap(he.a.get("http://localhost:8081/api/chats?page=".concat(e,"&size=").concat(5),n));case 6:r=s.sent,o=r.data.content,c=r.data.totalPages,r.data.last,t(wt(e,o,c)),s.next=16;break;case 13:s.prev=13,s.t0=s.catch(0),t({type:"GET_CHAT_PAGE_ERROR",errorMsg:"Une erreur est survenue"});case 16:case"end":return s.stop()}}),null,null,[[0,13]])}}function jt(e,t,a,n){return{type:"FETCH_MORE_CHATS_SUCCESS",chatPage:t,pageNumber:e,totalPages:a,last:n}}var Tt=Object(u.a)((function(e){return{chatNameInput:{marginBottom:e.spacing(4)},datePicker:{width:250,marginBottom:e.spacing(2)},fab:{position:"fixed",bottom:e.spacing(5),right:e.spacing(5),textTransform:"none"},extendedIcon:{marginRight:e.spacing(1)}}})),kt=Object(_e.a)({enableReinitialize:!0,mapPropsToValues:function(e){return{name:e.state.chat.name||""}},validationSchema:Ae.object().shape({name:Ae.string().max(255,"Le nom du chat ne peut pas exc\xe9der 255 caract\xe8res").required("Veuillez entrer un nom pour le chat")}),handleSubmit:function(e,t){var a=t.props,n=a.updateChat,r=a.state;n(Object(v.a)({},e,{id:r.chat.id}))}})((function(e){var t=Tt(),a=e.values,n=e.touched,o=e.errors,c=e.handleChange,s=e.handleBlur,i=e.handleSubmit,l=e.state,u=e.handleClose;return r.a.createElement(pt.a,{open:l.open,onClose:u,"aria-labelledby":"form-dialog-title",disableBackdropClick:!0},r.a.createElement("form",{onSubmit:i},r.a.createElement(ft.a,{id:"form-dialog-title"},"\xc9diter un chat"),r.a.createElement(ht.a,null,r.a.createElement(we.a,{autoFocus:!0,margin:"dense",id:"name",label:"Nom du chat",type:"text",fullWidth:!0,className:t.chatNameInput,value:a.name,onChange:c,onBlur:s,helperText:n.name?o.name:"",error:n.name&&Boolean(o.name),variant:"outlined"})),r.a.createElement(dt.a,null,r.a.createElement(Se.a,{color:"primary",onClick:u,variant:"outlined"},"Annuler"),r.a.createElement(Se.a,{type:"submit",color:"primary",variant:"contained"},"\xc9diter"))))})),Pt=function(e){function t(){return Object(T.a)(this,t),Object(P.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){this.props.getChatPage(0)}},{key:"render",value:function(){var e=this.props,t=e.chatState,a=e.createChat,n=e.deleteChat,o=e.getChatPage,c=e.openUpdateChat,s=e.closeUpdateChat,l=e.updateChat,u=e.fetchMoreChats,m=e.history,p=t.chatPage,d=t.pageNumber,h=t.totalPages,g=t.updateChatState,f=t.last;return ge()||m.push("/connexion"),r.a.createElement(i.a,{component:"main",maxWidth:"md",style:{minHeight:"calc(100vh - 150px)",marginTop:150}},r.a.createElement(mt,{totalPages:h,chatPage:p,getChatPage:o,pageNumber:d,deleteChat:n,openUpdateChat:c,fetchMoreChats:u,last:f}),r.a.createElement(yt,{createChat:a,getChatPage:o,pageNumber:d}),r.a.createElement(kt,{state:g,handleClose:s,updateChat:l}))}}]),t}(n.Component),_t=Object(h.b)((function(e){return{chatState:e.chats,navbarState:e.navbar}}),(function(e){return{createChat:function(t){return e(function(e){return function(t){var a,n,r,o,c;return pe.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return a=JSON.stringify(e),s.prev=1,n=ve("access_token"),s.next=5,pe.a.awrap(he.a.post("http://localhost:8081/api/chats",a,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}}));case 5:return t(M("Chat cr\xe9e avec succ\xe8s","success")),t(Ot(0)),s.abrupt("return",!0);case 10:return s.prev=10,s.t0=s.catch(1),r=s.t0.response.status,o=s.t0.response.data,c=St(r,o),t(M(c,"error")),s.abrupt("return",!1);case 17:case"end":return s.stop()}}),null,null,[[1,10]])}}(t))},updateChat:function(t){return e(function(e){return function(t){var a,n,r,o,c;return pe.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return a=JSON.stringify(e),s.prev=1,n=ve("access_token"),s.next=5,pe.a.awrap(he.a.put("http://localhost:8081/api/chats/".concat(e.id),a,{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)}}));case 5:return t(M("chat modifi\xe9 avec succ\xe8s","success")),t({type:"CLOSE_UPDATE_CHAT",open:!1,chat:null}),t(Ot(0)),s.abrupt("return",!0);case 11:return s.prev=11,s.t0=s.catch(1),r=s.t0.response.status,o=s.t0.response.data,c=St(r,o),t(M(c,"error")),s.abrupt("return",!1);case 18:case"end":return s.stop()}}),null,null,[[1,11]])}}(t))},deleteChat:function(t){return e(function(e){return console.log(e),function(t){var a,n;return pe.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,a=ve("access_token"),n={headers:{Authorization:"Bearer ".concat(a)}},r.next=5,pe.a.awrap(he.a.delete("http://localhost:8081/api/chats/".concat(e),n));case 5:return t(M("chat supprim\xe9 avec succ\xe8s","success")),t(Ot(0)),r.abrupt("return",!0);case 10:return r.prev=10,r.t0=r.catch(0),t(M("La suppression du chat a \xe9chou\xe9","error")),r.abrupt("return",!1);case 14:case"end":return r.stop()}}),null,null,[[0,10]])}}(t))},getChatPage:function(t){return e(Ot(t))},fetchMoreChats:function(t){return e(function(e){return function(t){var a,n,r,o,c,s;return pe.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,a=ve("access_token"),n={headers:{Authorization:"Bearer ".concat(a)}},5,i.next=6,pe.a.awrap(he.a.get("http://localhost:8081/api/chats?page=".concat(e,"&size=").concat(5),n));case 6:r=i.sent,o=r.data.content,c=r.data.totalPages,s=r.data.last,t(jt(e,o,c,s)),i.next=16;break;case 13:i.prev=13,i.t0=i.catch(0),t({type:"FETCH_MORE_CHATS_ERROR",errorMsg:"Une erreur est survenue"});case 16:case"end":return i.stop()}}),null,null,[[0,13]])}}(t))},openUpdateChat:function(t){return e(function(e){return{type:"OPEN_UPDATE_CHAT",open:!0,chat:e}}(t))},closeUpdateChat:function(){return e({type:"CLOSE_UPDATE_CHAT",open:!1,chat:null})}}}))(Pt),At=Object(u.a)((function(e){return{section1:{margin:e.spacing(3,2)},paper:{padding:24}}})),Bt=function(e){var t=e.SingleChat,a=At();return r.a.createElement(Oe.a,{elevation:12,className:a.paper},r.a.createElement("div",{className:a.section1},r.a.createElement(s.a,{component:"h1",variant:"h4"},t.name?t.name:"Non trouv\xe9"),r.a.createElement(s.a,{variant:"body1",color:"textSecondary"},"Anim\xe9 par : ",t.speakerUsername?t.speakerUsername:"Non trouv\xe9"),r.a.createElement(s.a,{variant:"body1",color:"textSecondary"},"Code : ",t.accessCode?t.accessCode:"Non trouv\xe9")))};function It(e){var t=e.senderName,a=e.text;return r.a.createElement(re.a,{disableGutters:!0},r.a.createElement(et.a,null,r.a.createElement(Ne.a,null,t.toUpperCase()[0])),r.a.createElement(ce.a,{primary:t,secondary:a}))}var Dt=Object(u.a)((function(e){return{messageSection:{margin:e.spacing(2)},messagesTitle:{marginTop:e.spacing(4)},noMessageText:{marginTop:e.spacing(2)}}})),Lt=function(e){var t=e.messages,a=Dt();return r.a.createElement("div",{className:a.messageSection},r.a.createElement(s.a,{variant:"h5",className:a.messagesTitle},"Messages"),0===t.length?r.a.createElement(s.a,{variant:"body1",className:a.noMessageText},"Aucun messages pour le moment"):r.a.createElement(n.Fragment,null,r.a.createElement(ne.a,null,t.map((function(e,t){return r.a.createElement(It,{key:t,senderName:e.senderName,text:e.text})})))))},Mt=Object(u.a)((function(e){return{chatNameInput:{marginBottom:e.spacing(4)},datePicker:{width:250,marginBottom:e.spacing(2)},fab:{position:"fixed",bottom:e.spacing(5),right:e.spacing(5),textTransform:"none"},extendedIcon:{marginRight:e.spacing(1)}}})),Rt=Object(_e.a)({mapPropsToValues:function(e){return{text:e.text||""}},validationSchema:Ae.object().shape({text:Ae.string().max(255,"Le texte de votre message ne peut pas d\xe9passer 255 caract\xe8res").required("Le texte de votre message ne peut \xeatre vide")}),handleSubmit:function(e,t){var a=t.props,n=t.resetForm,r=t.setSubmitting,o=a.sockJsClient,c=a.chatId,s=a.senderName,i=a.senderType,l={text:e.text,chatId:c,senderName:s,senderType:i};o.sendMessage("/app/user-all",JSON.stringify(l)),n(),r(!0)}})((function(e){var t=e.values,a=e.touched,n=e.errors,o=e.handleChange,c=e.handleBlur,s=e.handleSubmit,i=e.isSubmitting,l=e.setSubmitting,u=Mt(),m=r.a.useState(!1),p=Object(H.a)(m,2),d=p[0],h=p[1],g=function(){h(!1)};return r.a.createElement("div",null,r.a.createElement(vt.a,{onClick:function(){l(!1),h(!0)},className:u.fab,color:"primary","aria-label":"add",variant:"extended"},r.a.createElement(bt.a,{className:u.extendedIcon}),"Nouveau message"),r.a.createElement(pt.a,{open:!i&&d,onClose:g,"aria-labelledby":"form-dialog-title",disableBackdropClick:!0},r.a.createElement("form",{onSubmit:s},r.a.createElement(ft.a,{id:"form-dialog-title"},"Envoyer un nouveau message"),r.a.createElement(ht.a,null,r.a.createElement(we.a,{id:"text",label:"text",type:"text",fullWidth:!0,className:u.chatNameInput,value:t.text,onChange:o,onBlur:c,helperText:a.text?n.text:"",error:a.text&&Boolean(n.text),variant:"outlined",multiline:!0,rows:4,margin:"dense"})),r.a.createElement(dt.a,null,r.a.createElement(Se.a,{color:"primary",onClick:g,variant:"outlined"},"Annuler"),r.a.createElement(Se.a,{type:"submit",color:"primary",variant:"contained"},"Envoyer")))))})),Ut=Object(G.g)(Rt),zt=a(248),Ft=a.n(zt),Gt=function(e){return{type:"GET_MESSAGE_LIST",messageList:e}},Ht=function(e){var t=[],a=!0,n=!1,r=void 0;try{for(var o,c=e[Symbol.iterator]();!(a=(o=c.next()).done);a=!0){var s=o.value,i={text:s.text,senderName:null};null!=s.speaker&&(i.senderName=s.speaker.username),null!=s.guest&&(i.senderName=s.guest.pseudo),t.push(i)}}catch(l){n=!0,r=l}finally{try{a||null==c.return||c.return()}finally{if(n)throw r}}return t},Wt=function(e){function t(){var e;return Object(T.a)(this,t),(e=Object(P.a)(this,Object(_.a)(t).call(this))).sockJsClient=Object(n.createRef)(),e}return Object(A.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){console.log("component did mount"),this.props.getMessageList(this.props.chat.id)}},{key:"componentDidUpdate",value:function(e){e.chat.id!==this.props.chat.id&&(console.log("component did update"),this.props.getMessageList(this.props.chat.id))}},{key:"handleMessage",value:function(e,t){var a=e.body,n=e.statusCode,r=e.statusCodeValue;if(console.log(a),"OK"===n&&null!==a&&this.props.addMessage(a.senderName,a.text),"/user/queue/success"===t&&this.props.openNotification("Message envoy\xe9","success"),"/user/queue/errors"===t){console.log(e);var o=St(r,a);this.props.openNotification(o,"error")}}},{key:"render",value:function(){var e=this;return r.a.createElement(n.Fragment,null,r.a.createElement(Lt,{messages:this.props.messages}),r.a.createElement(Ut,{chatId:this.props.chat.id,senderName:this.props.chat.senderName,senderType:this.props.chat.senderType,sockJsClient:this.sockJsClient.current}),r.a.createElement(Ft.a,{url:"http://localhost:8081/websocket-chat/",topics:["/topic/user","/user/queue/errors","/user/queue/success"],onConnect:function(){console.log("connected")},onDisconnect:function(){console.log("Disconnected")},onMessage:function(t,a){return e.handleMessage(t,a)},ref:this.sockJsClient}))}}]),t}(n.Component),qt=Object(h.b)((function(e){return{messages:e.messages,chat:e.SingleChat}}),(function(e){return{getMessageList:function(t){return e(function(e){return function(t){var a,n,r;return pe.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,pe.a.awrap(he.a.get("http://localhost:8081/api/messages/chat/".concat(e)));case 3:a=o.sent,n=a.data,console.log(n),r=Ht(n),console.log("get message list"),console.log(r),t(Gt(r)),o.next=16;break;case 12:return o.prev=12,o.t0=o.catch(0),console.log(o.t0),o.abrupt("return",!1);case 16:case"end":return o.stop()}}),null,null,[[0,12]])}}(t))},addMessage:function(t,a){return e({type:"ADD_MESSAGE",senderName:t,text:a})},openNotification:function(t,a){return e(M(t,a))}}}))(Object(G.g)(Wt));var Vt=Object(_e.a)({mapPropsToValues:function(e){return{pseudo:e.pseudo||""}},validationSchema:Ae.object().shape({pseudo:Ae.string().required("Entrez un pseudo")}),handleSubmit:function(e,t){var a,n,r,o,c,s,i,l,u,m;return pe.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:return a=t.props,n=t.resetForm,r=a.chatId,o=a.openNotif,c=a.closeForm,s=a.setSenderName,i=a.setSenderType,l=Object(v.a)({},e,{chatId:r}),u=JSON.stringify(l),console.log(l),p.prev=5,p.next=8,pe.a.awrap(he.a.post("http://localhost:8081/api/guests",u,{headers:{"Content-Type":"application/json"}}));case 8:n(),o("Bienvenue ".concat(l.pseudo,", vous pouvez maintenant envoyer vos messages dans ce chat"),"success"),c(),s(l.pseudo),i("guest"),p.next=19;break;case 15:p.prev=15,p.t0=p.catch(5),m=St(p.t0.response.status,p.t0.response.data),o(m,"error");case 19:case"end":return p.stop()}}),null,null,[[5,15]])}})((function(e){var t=e.values,a=e.touched,n=e.errors,o=e.handleChange,c=e.handleBlur,s=e.handleSubmit,i=e.open;return r.a.createElement("div",null,r.a.createElement(pt.a,{open:i,"aria-labelledby":"form-dialog-title"},r.a.createElement(ft.a,{id:"form-dialog-title"},"Choix du pseudo"),r.a.createElement(ht.a,null,r.a.createElement(gt.a,null,"Veuillez choisir le pseudo que vous utiliserez dans ce chat."),r.a.createElement(we.a,{id:"pseudo",label:"Pseudo",type:"text",value:t.pseudo,onChange:o,onBlur:c,helperText:a.pseudo?n.pseudo:"",error:a.pseudo&&Boolean(n.pseudo),variant:"outlined",margin:"normal",fullWidth:!0,autoFocus:!0,required:!0})),r.a.createElement(dt.a,null,r.a.createElement(Se.a,{onClick:s,color:"primary"},"Valider"))))})),Jt=function(e){function t(){return Object(T.a)(this,t),Object(P.a)(this,Object(_.a)(t).apply(this,arguments))}return Object(A.a)(t,e),Object(k.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.location.state.chatId;this.props.getSingleChat(t),ge()?(console.log("is logged"),function(){var e,t,a;return pe.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e=ve("access_token"),n.next=4,pe.a.awrap(he.a.get("http://localhost:8081/api/speakers/getusername",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}));case 4:return t=n.sent,a=t.data,console.log(a),n.abrupt("return",a);case 10:return n.prev=10,n.t0=n.catch(0),console.log(n.t0),n.abrupt("return",n.t0.response);case 14:case"end":return n.stop()}}),null,null,[[0,10]])}().then((function(t){console.log("username : "+t),t?e.props.setSenderName(t):console.log("speaker username not found"),e.props.setSenderType("speaker")}))):this.props.openCreateGuest()}},{key:"render",value:function(){var e=this.props.match.params.chatId;return console.log(this.props.SingleChat),r.a.createElement(i.a,{component:"main",maxWidth:"md",style:{minHeight:"calc(100vh - 150px)",marginTop:150}},r.a.createElement(Bt,{SingleChat:this.props.SingleChat}),r.a.createElement(qt,{chatId:e}),r.a.createElement(Vt,{open:this.props.SingleChat.showCreateGuest,openNotif:this.props.openNotification,chatId:this.props.SingleChat.id,closeForm:this.props.closeCreateGuest,setSenderName:this.props.setSenderName,setSenderType:this.props.setSenderType}))}}]),t}(n.Component),Yt=Object(h.b)((function(e){return{SingleChat:e.SingleChat}}),(function(e){return{getSingleChat:function(t){return e((a=t,function(e){var t,n;return pe.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,pe.a.awrap(he.a.get("http://localhost:8081/api/chats/".concat(a)));case 3:if(t=r.sent,n=t.data,console.log(n),!n){r.next=11;break}return e(Le(n)),r.abrupt("return",!0);case 11:return e(M("Aucun chat trouv\xe9 avec l'id [".concat(a,"]"),"error")),r.abrupt("return",!1);case 13:r.next=19;break;case 15:return r.prev=15,r.t0=r.catch(0),console.log(r.t0),r.abrupt("return",!1);case 19:case"end":return r.stop()}}),null,null,[[0,15]])}));var a},openNotification:function(t,a){return e(M(t,a))},openCreateGuest:function(){return e({type:"OPEN_CREATE_GUEST",showCreateGuest:!0})},closeCreateGuest:function(){return e({type:"CLOSE_CREATE_GUEST",showCreateGuest:!1})},setSenderName:function(t){return e(function(e){return{type:"SET_SENDER_NAME",senderName:e}}(t))},setSenderType:function(t){return e(function(e){return{type:"SET_SENDER_TYPE",senderType:e}}(t))}}}))(Jt),$t=Object(u.a)((function(e){return{avatar:{marginTop:e.spacing(3),marginBottom:e.spacing(1),marginLeft:"auto",marginRight:"auto",backgroundColor:e.palette.secondary.main},form:{width:"100%"},submit:{margin:e.spacing(3,0,2)},card:{width:"100%",borderRadius:10},cardContent:{width:"90%",margin:"0 auto"},title:{marginBottom:e.spacing(3)},paper:{width:"100%",padding:60}}})),Zt=Object(_e.a)({mapPropsToValues:function(e){return{username:e.username||"",password:e.password||"",confirmPassword:e.confirmPassword||""}},validationSchema:Ae.object().shape({username:Ae.string().required("Entrez votre identifiant"),password:Ae.string().matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[.:;?|/\\{}<>!@#$%^&*()_+-=])(?=.{8,})/,"Doit contenir au moins 8 caract\xe8res, 1 minuscule, 1 majuscule, 1 chiffres, 1 caract\xe8re sp\xe9cial").required("Entrez votre mot de passe"),confirmPassword:Ae.string().required("Confirmez votre mot de passe").oneOf([Ae.ref("password")],"Le mot de passe ne correspond pas")}),handleSubmit:function(e,t){var a=t.props,n=t.resetForm,r=a.createSpeaker,o=a.history,c=Object.assign({},e);delete c.confirmPassword,r(c).then((function(e){e&&(n(),o.push("/connexion"))}))}})((function(e){var t=e.values,a=e.touched,n=e.errors,o=e.handleChange,c=e.handleBlur,i=e.handleSubmit,u=$t();return r.a.createElement(Oe.a,{className:u.paper,elevation:5},r.a.createElement(Ne.a,{className:u.avatar},r.a.createElement(He.a,null)),r.a.createElement(s.a,{className:u.title,component:"h1",variant:"h5"},"Inscription"),r.a.createElement("form",{className:u.form,onSubmit:i,noValidate:!0},r.a.createElement(we.a,{id:"username",label:qe.username,value:t.username,onChange:o,onBlur:c,helperText:a.username?n.username:"",error:a.username&&Boolean(n.username),variant:"outlined",margin:"normal",autoFocus:!0,fullWidth:!0,required:!0}),r.a.createElement(we.a,{id:"password",label:qe.password,type:"password",value:t.password,onChange:o,onBlur:c,helperText:a.password?n.password:"",error:a.password&&Boolean(n.password),variant:"outlined",margin:"normal",fullWidth:!0,required:!0}),r.a.createElement(we.a,{id:"confirmPassword",label:qe.confirmPassword,type:"password",value:t.confirmPassword,onChange:o,onBlur:c,helperText:a.confirmPassword?n.confirmPassword:"",error:a.confirmPassword&&Boolean(n.confirmPassword),variant:"outlined",margin:"normal",fullWidth:!0,required:!0}),r.a.createElement(Se.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:u.submit,size:"large"},"S'inscrire")),r.a.createElement(F.b,{to:"/connexion"},r.a.createElement(l.a,{component:"span",variant:"body2"},"Vous avez d\xe9j\xe0 un compte? Connectez-vous")))})),Kt=Object(G.g)(Zt);var Qt,Xt=Object(h.b)(null,(function(e){return{createSpeaker:function(t){return e(function(e){return function(t){var a,n,r,o;return pe.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return a=JSON.stringify(e),c.prev=1,c.next=4,pe.a.awrap(he.a.post("http://localhost:8081/api/speakers",a,{headers:{"Content-Type":"application/json"}}));case 4:return t(M("Compte cr\xe9e avec succ\xe8s","success")),c.abrupt("return",!0);case 8:return c.prev=8,c.t0=c.catch(1),n=c.t0.response.status,r=c.t0.response.data,o=St(n,r),t(M(o,"error")),c.abrupt("return",!1);case 15:case"end":return c.stop()}}),null,null,[[1,8]])}}(t))}}}))((function(e){var t=e.createSpeaker;return r.a.createElement(Ze,{maxWidth:"md"},r.a.createElement(Kt,{createSpeaker:t}))})),ea=function(){return r.a.createElement(F.a,null,r.a.createElement(xe,null),r.a.createElement(G.d,null,r.a.createElement(G.b,{exact:!0,path:"/",component:Re}),r.a.createElement(G.b,{exact:!0,path:"/inscription",component:Xt}),r.a.createElement(G.b,{exact:!0,path:"/connexion",component:Ke}),r.a.createElement(ze,{exact:!0,path:"/chats",component:_t}),r.a.createElement(G.b,{exact:!0,path:"/chats/:code",component:Yt}),r.a.createElement(G.b,{path:"*",component:Fe})))},ta=Object(g.c)(j,Qt,Object(g.a)(f.a)),aa=function(){return r.a.createElement(h.a,{store:ta},r.a.createElement(z.a,null),r.a.createElement(ea,null),r.a.createElement(U,null),r.a.createElement(d,null))};c.a.render(r.a.createElement(aa,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[265,1,2]]]);
//# sourceMappingURL=main.8788b62f.chunk.js.map